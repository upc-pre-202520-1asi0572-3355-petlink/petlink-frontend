<div class="container my-4">
  <h2 class="text-primary fw-bold">游늵 Dashboard Veterinario</h2>
  <p class="text-muted mb-4">
    Este panel ofrece una visi칩n general en tiempo real del estado de las mascotas internadas. 
    Aqu칤 se muestran indicadores de estabilidad, alertas y casos cr칤ticos, adem치s de un gr치fico visual 
    y la lista de pacientes en monitoreo activo para apoyar la toma de decisiones cl칤nicas.
  </p>

  <!-- Loading -->
  <div *ngIf="loading" class="text-center py-5">
    <div class="spinner-border text-primary"></div>
    <p class="mt-2">Cargando dashboard...</p>
  </div>

  <!-- Error -->
  <div *ngIf="error" class="alert alert-danger">{{ error }}</div>

  <!-- Contenido -->
  <div *ngIf="!loading && dashboard">

    <!-- Tarjetas de resumen -->
    <div class="row text-center mb-4">
      <div class="col-md-3 mb-3">
        <div class="card shadow-sm p-3">
          <h5 class="text-muted">Total</h5>
          <h2 class="fw-bold">{{ dashboard.total }}</h2>
        </div>
      </div>
      <div class="col-md-3 mb-3">
        <div class="card shadow-sm p-3">
          <h5 class="text-danger">Cr칤ticos</h5>
          <h2 class="fw-bold text-danger">{{ dashboard.criticos }}</h2>
        </div>
      </div>
      <div class="col-md-3 mb-3">
        <div class="card shadow-sm p-3">
          <h5 class="text-success">Estables</h5>
          <h2 class="fw-bold text-success">{{ dashboard.estables }}</h2>
        </div>
      </div>
      <div class="col-md-3 mb-3">
        <div class="card shadow-sm p-3">
          <h5 class="text-warning">Alertas</h5>
          <h2 class="fw-bold text-warning">{{ dashboard.alertas }}</h2>
        </div>
      </div>
    </div>

    <!-- Gr치fico de dona -->
    <div class="row justify-content-center mb-4" *ngIf="dashboard.total > 0">
      <div class="col-md-6">
        <div class="chart-container">
          <canvas baseChart
                  [data]="chartData"
                  [options]="chartOptions"
                  type="doughnut">
          </canvas>
        </div>
      </div>
    </div>

    <!-- Mensaje si no hay mascotas internadas -->
    <div *ngIf="dashboard.total === 0" class="alert alert-info text-center">
      No hay mascotas internadas actualmente.
    </div>

    <!-- Tabla de mascotas en monitoreo -->
    <div *ngIf="dashboard.mascotas.length > 0">
      <h5 class="fw-bold mb-3">游 Mascotas en Monitoreo</h5>
      <div class="table-responsive">
        <table class="table table-hover shadow-sm">
          <thead class="table-light">
            <tr>
              <th>ID</th>
              <th>Mascota</th>
              <th>Ritmo Card칤aco</th>
              <th>Estado</th>
              <th>칔ltima Actualizaci칩n</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let m of dashboard.mascotas">
              <td>{{ m.id }}</td>
              <td class="fw-bold">{{ m.nombre }}</td>
              <td>
                <span *ngIf="m.ritmoCardiaco !== null">{{ m.ritmoCardiaco }} BPM</span>
                <span *ngIf="m.ritmoCardiaco === null" class="text-muted">Sin datos</span>
              </td>
              <td>
                <span [class]="getEstadoClass(m.estadoLED)">{{ getEstadoLabel(m.estadoLED) }}</span>
              </td>
              <td>{{ formatFecha(m.ultimaActualizacion) }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

  </div>
</div>